# ==========================================
# Obsidian Webhooks Self-Hosted - Configuration
# ==========================================

# Server Configuration
PORT=8080
EXTERNAL_HOST=http://localhost:8080

# ==========================================
# Database Configuration
# ==========================================

# Option 1: PostgreSQL (Local or Self-Hosted)
# DATABASE_URL=postgres://user:password@localhost:5432/obsidian_webhooks

# Option 2: Supabase (Recommended for Cloud Deployment)
# 1. Create account at https://supabase.com
# 2. Create new project
# 3. Go to Settings → Database → Connection string → PostgreSQL
# 4. Copy and paste below (format: postgresql://[user]:[password]@[host]:[port]/[database])
# DATABASE_URL=postgresql://postgres.[project-id]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# Option 3: Local Docker PostgreSQL
# DATABASE_URL=postgres://webhook_user:webhook_password@db:5432/obsidian_webhooks

DATABASE_URL=postgres://user:password@localhost:5432/obsidian_webhooks

# ==========================================
# JWT Configuration
# ==========================================
# Generate strong secret: openssl rand -base64 32
JWT_SECRET=change-me-to-a-strong-random-secret-32-chars-min

# ==========================================
# Event Configuration
# ==========================================
# How long to keep events in database (days)
EVENT_TTL_DAYS=30

# Enable automatic cleanup of old events
ENABLE_AUTO_CLEANUP=true

# ==========================================
# Optional: Reverse Proxy / HTTPS Configuration
# ==========================================
# Uncomment if using Nginx/Apache reverse proxy with HTTPS
# EXTERNAL_HOST=https://webhooks.yourdomain.com

# ==========================================
# PostHog Analytics (Optional)
# ==========================================
# PostHog project API key (format: phc_xxxxxxxxxxxx)
# Used for: Client-side tracking (landing pages, plugin)
# Get from: https://app.posthog.com/project/settings
POSTHOG_API_KEY=

# PostHog API host (EU or US region)
# EU datacenter (GDPR compliant): https://eu.i.posthog.com
# US datacenter: https://app.posthog.com
POSTHOG_HOST=https://eu.i.posthog.com

# Enable/disable PostHog analytics tracking
# Set to 'true' to enable, 'false' to disable
# Server works fully without PostHog
POSTHOG_ENABLED=false

# ==========================================
# Admin User (Auto-Seed on First Run)
# ==========================================
# Created automatically if no admin users exist in database.
# After first run, you can remove the password from this file.
ADMIN_USERNAME=admin
ADMIN_PASSWORD=change-me-to-a-secure-password

# ==========================================
# Encryption at Rest (AES-256-GCM)
# ==========================================
# Generate: openssl rand -hex 32
# If not set, event data is stored in plaintext
ENCRYPTION_KEY=

# ==========================================
# Email Authentication Configuration
# ==========================================

# Mailgun Configuration (Transactional Emails)
# Get API key from: https://app.mailgun.com/app/account/security/api_keys
MAILGUN_DOMAIN=mail.yourdomain.com
MAILGUN_API_KEY=
MAILGUN_FROM_EMAIL=noreply@yourdomain.com
MAILGUN_FROM_NAME=Obsidian Webhooks

# MailerLite Configuration (Optional - Marketing Automation)
# Server works fully without MailerLite
# Get API key from: Settings → Integrations → API
# Get group IDs from URL when viewing groups: /groups/{GROUP_ID}
MAILERLITE_API_KEY=
MAILERLITE_GROUP_SIGNUPS=
MAILERLITE_GROUP_ACTIVE=

# Magic Link Settings
# Expiry time in seconds (default: 3600 = 1 hour)
MAGIC_LINK_EXPIRY=3600
# Base URL for magic links (must match your EXTERNAL_HOST)
MAGIC_LINK_BASE_URL=http://localhost:8080
